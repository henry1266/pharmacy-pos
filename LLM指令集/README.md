# LLM指令集 - 開發規則速查

> 為LLM優化的開發規則集，簡潔高效，便於快速理解和應用

## 使用方式

### 1. 代碼審查時
```
請根據 LLM指令集/代碼品質規則.md 檢查以下代碼
```

### 2. 重構時
```
請按照 LLM指令集/架構設計規則.md 重構此組件
```

### 3. 安全檢查時
```
請依據 LLM指令集/安全規則.md 檢查安全問題
```

## 規則集概覽

### [代碼品質規則.md](./代碼品質規則.md)
- **SonarCloud規則**: S6582, S2004, S4165, S1128
- **React最佳實踐**: 組件大小、性能優化、PropTypes
- **品質門檻**: A級評等、覆蓋率>80%

### [架構設計規則.md](./架構設計規則.md)
- **組件設計**: 單一責任、Props設計
- **狀態管理**: useState vs useQuery分工
- **檔案結構**: Feature-based組織
- **抽象原則**: 延後抽象、依賴管理

### [安全規則.md](./安全規則.md)
- **NoSQL防護**: 查詢安全、參數處理
- **認證授權**: JWT、權限檢查
- **資料清理**: 輸入驗證、輸出清理
- **環境安全**: 環境變數、CORS設定

## 快速檢查清單

### 代碼提交前
```
□ 可選鏈操作符 (obj?.prop)
□ 函數嵌套<4層
□ 組件<300行，函數<40行
□ 無未使用導入
□ PropTypes驗證
□ 查詢參數.toString()
□ 使用查詢物件包裝
□ 環境變數不硬編碼
```

### 組件設計時
```
□ 單一責任原則
□ Props通用命名
□ UI與業務邏輯分離
□ 狀態正確分類
□ API層封裝
□ 避免過早抽象
```

## 工具整合

### ESLint配置
```json
{
  "prefer-optional-chaining": "error",
  "max-depth": ["error", 4],
  "max-lines": ["error", 300],
  "no-unused-vars": "error"
}
```

### SonarCloud門檻
- 可維護性: A級
- 可靠性: A級  
- 安全性: A級
- 覆蓋率: >80%

## 更新記錄
- 2025-06-18: 基於OvertimeManager重構經驗建立初版
- 涵蓋14個實際SonarCloud問題的解決方案
- 整合pharmacy-pos專案的最佳實踐